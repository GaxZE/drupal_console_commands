# Usage: drupal site:test --placeholder="name:subscriptions" --placeholder="root:/vagrant/repos" --placeholder="tags:tags"
command:
  name: site:test
  description: 'Sets the test suites up and then runs them.'
commands:
# Create phpunit.xml
  - command: site:phpunit:setup
    arguments:
      name: '%{{name}}'
# Create behat.yml
  - command: site:behat:setup
    arguments:
      name: '%{{name}}'
# Run Behat
  - command: exec
    arguments:
      bin: 'cd %{{root|/vagrant/repos}}/%{{name}}/tests; ./behat --tags="%{{tags}}";'
# Run phpunit
  - command: exec
    arguments:
      bin: 'cd %{{root|/vagrant/repos}}/%{{name}}; ./vendor/bin/phpunit;'
